System.register("chunks:///data/Constants.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(s,t){var c,n,o,e,i,a,r,u,l;return s({_dec:void 0,_class:void 0,_class2:void 0,_temp:void 0,PhysicsGroup:void 0}),{setters:[function(s){c=s.classCallCheck},function(s){n=s.cclegacy,o=s._decorator}],execute:function(){n._RF.push({},"0a9dfC5jDtMN684hvrTkkQ5","Constants",void 0),u=o.ccclass,o.property,function(s){s[s.NONE=0]="NONE",s[s.NORMAL=1]="NORMAL",s[s.JUMP_TRIGGER=2]="JUMP_TRIGGER",s[s.ALL=3]="ALL"}(l||(l={})),s("Constants",(e=u("Constants"),e((r=a=function s(){c(this,s)},a.PhysicsGroup=l,i=r))||i)),n._RF.pop()}}}));

System.register("chunks:///editor/init.js",["cc"],(function(c,t){var e,r,o;return{setters:[function(c){e=c.cclegacy,r=c._decorator,o=c.macro}],execute:function(){e._RF.push({},"d1222o6DxJIu4szMAkt0TEB","init",void 0),r.ccclass,r.property,o.ENABLE_WEBGL_ANTIALIAS=!0,e._RF.pop()}}}));

System.register("chunks:///RoleBase.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./data/Constants.js"],(function(i,t){var e,n,o,s,r,a,l,h,g,u,c,d,m,p,_,y,C,f,v,S,k;return i({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(i){e=i.inherits,n=i.createClass,o=i.classCallCheck,s=i.possibleConstructorReturn,r=i.getPrototypeOf},function(i){a=i.cclegacy,l=i._decorator,h=i.Vec3,g=i.Vec2,u=i.AnimationComponent,c=i.RigidBodyComponent,d=i.ColliderComponent,m=i.Component},function(i){p=i.Constants}],execute:function(){a._RF.push({},"690f27f0+xGV5Gxh5XvuFOK","RoleBase",void 0),C=l.ccclass,l.property,f=new h,v=new h,S=new g(1,0),k=new h(0,0,10),i("RoleBase",(_=C("RoleBase"),_(y=function(i){function t(){var i,e;o(this,t);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(e=s(this,(i=r(t)).call.apply(i,[this].concat(a))))._isJumping=!1,e._animComp=null,e._rigidBody=null,e.collider=null,e._animState="rig|idle1",e._tempDelta=new g,e.isRuning=!1,e}return e(t,i),n(t,[{key:"start",value:function(){this._animComp=this.node.getComponent(u),this._rigidBody=this.node.getComponent(c),this.collider=this.node.getComponent(d),this.collider.setMask(p.PhysicsGroup.ALL),this.collider.on("onCollisionEnter",this.onCollision,this),this.collider.on("onTriggerExit",this.onTriggerExit,this)}},{key:"onDestroy",value:function(){}},{key:"onCollision",value:function(i){"cell"==i.otherCollider.node._name&&this._isJumping&&(this.isRuning?this.changeState("rig|run"):this.changeState("rig|idle1"),this._isJumping=!1,this.collider.setMask(p.PhysicsGroup.ALL)),"top"!=i.otherCollider.node._name&&"ramp"!=i.otherCollider.node._name||i.contacts[0].normal.y>.5&&this._isJumping&&(this.isRuning?this.changeState("rig|run"):this.changeState("rig|idle1"),this._isJumping=!1,this.collider.setMask(p.PhysicsGroup.ALL)),"jumpTrigger"==i.otherCollider.node._name&&(i.otherCollider.isTrigger=!0,this._rigidBody.getLinearVelocity(v),(i.otherCollider.node.position.z>0&&i.contacts[0].normal.z>.9&&v.z<-5||i.otherCollider.node.position.z<0&&i.contacts[0].normal.z<-.9&&v.z>5||i.otherCollider.node.position.x>0&&i.contacts[0].normal.x>.9&&v.x<-5||i.otherCollider.node.position.x<0&&i.contacts[0].normal.x<-.9&&v.x>5)&&0==this._isJumping&&(this.changeState("rig|jump"),this.collider.setMask(p.PhysicsGroup.NORMAL)))}},{key:"onTriggerExit",value:function(i){"jumpTrigger"==i.otherCollider.node._name&&(i.otherCollider.isTrigger=!1)}},{key:"changeState",value:function(i){if(this._animState!==i){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];if(!(e.length>0&&e.indexOf(this._animState)<0))switch(this._animComp.play(i),this._animState=i,i){case"rig|jump":this.jump(),this._isJumping=!0;break;case"rig|jumpDown":this._isJumping=!0;break;case"rig|run":this.trunEulerAnglesByDelta()}}}},{key:"jump",value:function(){v.set(0,150,0),h.transformQuat(v,v,this.node.getWorldRotation()),this._rigidBody.applyImpulse(v),this._rigidBody.getLinearVelocity(v)}},{key:"trunEulerAnglesByDelta",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._tempDelta;if(this._tempDelta.set(i),0!=i.length()&&"rig|run"===this._animState){var t=i.angle(S),e=180*t/Math.PI,n=this.node.eulerAngles;f.set(n.x,90+Math.sign(i.y)*e,n.z),this.node.eulerAngles=f}}},{key:"update",value:function(i){"rig|jump"!=this._animState&&"rig|jumpDown"!=this._animState&&(this._rigidBody.getLinearVelocity(f),f.y<-4.5&&this.changeState("rig|jumpDown")),("rig|run"==this._animState||this._isJumping)&&"rig|run"==this._animState&&(v.set(k),h.transformQuat(v,v,this.node.getWorldRotation()),this._rigidBody.getLinearVelocity(f),this._rigidBody.setLinearVelocity(v.set(v.x,f.y,v.z)))}}]),t}(m))||y)),a._RF.pop()}}}));

System.register("chunks:///Enemy.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./data/Constants.js","./RoleBase.js"],(function(t,e){var i,n,s,o,a,r,l,c,h,u,d,p,g,y,_,m,f,v,P,w,T,C,D,b,k,A,E;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inherits,s=t.classCallCheck,o=t.possibleConstructorReturn,a=t.getPrototypeOf,r=t.initializerDefineProperty,l=t.assertThisInitialized,c=t.createClass,h=t.get},function(t){u=t.cclegacy,d=t._decorator,p=t.Vec3,g=t.Vec2,y=t.ColliderComponent},function(t){_=t.Constants},function(t){m=t.RoleBase}],execute:function(){u._RF.push({},"051f0OqfPFOhIEePeNM4398","Enemy",void 0),b=d.ccclass,k=d.property,A=new p,new g(1,0),E=.5,t("Enemy",(f=b("Enemy"),v=k(p),P=k({type:y}),f((C=i((T=function(t){function e(){var t,i;s(this,e);for(var n=arguments.length,c=new Array(n),h=0;h<n;h++)c[h]=arguments[h];return i=o(this,(t=a(e)).call.apply(t,[this].concat(c))),r(i,"originPos",C,l(i)),r(i,"wallTest",D,l(i)),i.deltaPos=new p,i.Delta=new g,i._deltaTime=E,i._rotateAngle=!1,i}return n(e,t),c(e,[{key:"start",value:function(){h(a(e.prototype),"start",this).call(this),this.node.setPosition(this.originPos),A.set(0,0,0),this.node.eulerAngles=A,this._animComp.getState("rig|run").speed=1.5,this._animComp.getState("rig|jump").speed=4/3,this.changeState("rig|idle1"),this.wallTest.on("onTriggerEnter",this.onWallTest,this),this.wallTest.setMask(1)}},{key:"onDestroy",value:function(){h(a(e.prototype),"onDestroy",this).call(this)}},{key:"onWallTest",value:function(t){"WallLargeB"==t.otherCollider.node._name&&(this._rotateAngle=!0)}},{key:"update",value:function(t){p.subtract(this.deltaPos,this.node.position,_.roleManager.mainRole.node.position),this.Delta.set(this.deltaPos.x,-this.deltaPos.z),this.Delta.length()<10?this._deltaTime>=.5&&(this._deltaTime=0,this._tempDelta.set(this.Delta.rotate((20*Math.random()-10+(this._rotateAngle?90:0))*Math.PI/180)),this._rotateAngle=!1,this.trunEulerAnglesByDelta(),this.changeState("rig|run","rig|idle1")):this.changeState("rig|idle1","rig|run"),this._deltaTime+=t,h(a(e.prototype),"update",this).call(this,t)}}]),e}(m)).prototype,"originPos",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),D=i(T.prototype,"wallTest",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=T))||w)),u._RF.pop()}}}));

System.register("chunks:///RoleCtrl.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./data/Constants.js","./RoleBase.js"],(function(e,t){var i,o,n,r,s,a,l,c,u,p,d,h,y,m,g,f,v,C,_,P,b,R,z,w,j,k;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inherits,n=e.classCallCheck,r=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass,u=e.get},function(e){p=e.cclegacy,d=e._decorator,h=e.Vec3,y=e.Node,m=e.PhysicsSystem},function(e){g=e.Constants},function(e){f=e.RoleBase}],execute:function(){p._RF.push({},"7547eZJoEVI7bGT4KMlxfz9","RoleCtrl",void 0),w=d.ccclass,j=d.property,k=new h,e("RoleCtrl",(v=w("RoleCtrl"),C=j(y),_=j(h),v((R=i((b=function(e){function t(){var e,i;n(this,t);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return i=r(this,(e=s(t)).call.apply(e,[this].concat(c))),a(i,"camera",R,l(i)),a(i,"originPos",z,l(i)),i.cameraPos=new h(0,40,40),i}return o(t,e),c(t,[{key:"start",value:function(){m.instance.gravity=new cc.math.Vec3(0,-30,0),u(s(t.prototype),"start",this).call(this),this.node.setPosition(this.originPos),this.cameraPos.set(this.camera.position),k.set(0,180,0),this.node.eulerAngles=k,this._animComp.getState("rig|run").speed=1.5,this._animComp.getState("rig|jump").speed=4/3,this.changeState("rig|idle1")}},{key:"onCollision",value:function(e){u(s(t.prototype),"onCollision",this).call(this,e),"enemy"==e.otherCollider.node._name&&(console.log("enemy"),g.roleManager.destroyEnemy(e.otherCollider.node))}},{key:"update",value:function(e){u(s(t.prototype),"update",this).call(this,e),h.add(k,this.node.position,this.cameraPos),k.z=k.z<=40?k.z:40,this.camera.setPosition(k)}}]),t}(f)).prototype,"camera",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(b.prototype,"originPos",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),P=b))||P)),p._RF.pop()}}}));

System.register("chunks:///JoyCtrl.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./RoleCtrl.js"],(function(t,i){var o,e,s,n,r,c,h,a,l,u,_,p,y,P,f,v,g,d,m,C,S,T,w,R,E,b,U,k,D,K,O,M,H;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inherits,s=t.classCallCheck,n=t.possibleConstructorReturn,r=t.getPrototypeOf,c=t.initializerDefineProperty,h=t.assertThisInitialized,a=t.createClass},function(t){l=t.cclegacy,u=t._decorator,_=t.Vec3,p=t.Vec2,y=t.Node,P=t.UITransformComponent,f=t.systemEvent,v=t.SystemEventType,g=t.macro,d=t.Component},function(t){m=t.RoleCtrl}],execute:function(){l._RF.push({},"f212daZ9w9PTbE7kLmGQ7Md","JoyCtrl",void 0),D=u.ccclass,K=u.property,120,O=new _,M=new p,H=new p(1,0),t("JoyCtrl",(C=D("JoyCtrl"),S=K(y),T=K(_),w=K({type:m}),C((b=o((E=function(t){function i(){var t,o;s(this,i);for(var e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return o=n(this,(t=r(i)).call.apply(t,[this].concat(a))),c(o,"ctrlSprite",b,h(o)),c(o,"originPos",U,h(o)),c(o,"mainRole",k,h(o)),o._isTouch=!1,o._touchPos=new p,o._startPos=new p,o._movePos=new p,o._originPos=new p,o}return e(i,t),a(i,[{key:"start",value:function(){this.ctrlSprite.setPosition(this.originPos),O.set(this.ctrlSprite.getComponent(P).convertToWorldSpaceAR(this.originPos)),this._originPos.set(O.x,O.y),f.on(v.TOUCH_START,this.touchStart,this),f.on(v.TOUCH_MOVE,this.touchMove,this),f.on(v.TOUCH_END,this.touchEnd,this),f.on(v.KEY_UP,this.onKeyUp,this),f.on(v.KEY_DOWN,this.onKeyDown,this)}},{key:"onDestroy",value:function(){f.off(v.TOUCH_START,this.touchStart,this),f.off(v.TOUCH_MOVE,this.touchMove,this),f.off(v.TOUCH_END,this.touchEnd,this),f.off(v.KEY_UP,this.onKeyUp,this),f.off(v.KEY_DOWN,this.onKeyDown,this)}},{key:"onKeyUp",value:function(t){switch(t.keyCode){case g.KEY.space:}}},{key:"onKeyDown",value:function(t){switch(t.keyCode){case g.KEY.space:this.mainRole.changeState("rig|jump")}}},{key:"touchStart",value:function(t){t.getUILocation(this._startPos),p.subtract(M,this._startPos,this._originPos).length()<120&&(this._touchPos.set(this._startPos),this._movePos.set(this._startPos),O.set(this.ctrlSprite.position),this.ctrlSprite.setWorldPosition(this._startPos.x,this._startPos.y,O.z),this._isTouch=!0,this.mainRole.isRuning=!0,this.mainRole.changeState("rig|run","rig|idle1"))}},{key:"touchMove",value:function(t){if(this._isTouch){if(t.getUILocation(this._movePos),p.subtract(M,this._movePos,this._originPos).length()>120){var i=-M.signAngle(H),o=120*Math.cos(i),e=120*Math.sin(i);this._movePos.set(this._originPos.x+o,this._originPos.y+e)}this.ctrlSprite.setWorldPosition(this._movePos.x,this._movePos.y,0),this._touchPos.set(this._movePos),this.mainRole.trunEulerAnglesByDelta(M)}}},{key:"touchEnd",value:function(t){this._isTouch=!1,this.mainRole.isRuning=!1,this.ctrlSprite.setPosition(this.originPos),this.mainRole.changeState("rig|idle1")}}]),i}(d)).prototype,"ctrlSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=o(E.prototype,"originPos",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _}}),k=o(E.prototype,"mainRole",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=E))||R)),l._RF.pop()}}}));

System.register("chunks:///RoleManager.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./data/Constants.js","./RoleCtrl.js"],(function(e,t){var n,i,r,o,a,s,l,c,u,p,y,d,f,h,m,v,_,g,b,R,C,P,k,z,L,I,M;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,s=e.initializerDefineProperty,l=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,p=e._decorator,y=e.Prefab,d=e.Node,f=e.instantiate,h=e.Component},function(e){m=e.Constants},function(e){v=e.RoleCtrl}],execute:function(){u._RF.push({},"ce533uJoKNLybmBznn1tNhp","RoleManager",void 0),I=p.ccclass,M=p.property,e("RoleManager",(_=I("RoleManager"),g=M({type:v}),b=M({type:y}),R=M(d),_((k=n((P=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return n=o(this,(e=a(t)).call.apply(e,[this].concat(c))),s(n,"mainRole",k,l(n)),s(n,"enemyPrefab",z,l(n)),s(n,"resetUI",L,l(n)),n._enemyList=[],n}return i(t,e),c(t,[{key:"__preload",value:function(){m.roleManager=this}},{key:"start",value:function(){this.createEnemy()}},{key:"createEnemy",value:function(){var e=f(this.enemyPrefab);e.parent=this.node,this._enemyList.push(e)}},{key:"destroyEnemy",value:function(e){var t=this._enemyList.indexOf(e);t>=0&&(this._enemyList.splice(t,1),e.destroy()),0==this._enemyList.length&&(console.log("gameover"),this.resetUI.active=!0)}},{key:"resetGame",value:function(){this.mainRole.node.setPosition(this.mainRole.originPos),this.createEnemy(),this.resetUI.active=!1}}]),t}(h)).prototype,"mainRole",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(P.prototype,"enemyPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(P.prototype,"resetUI",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=P))||C)),u._RF.pop()}}}));

System.register("chunks:///setGroupMask.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./data/Constants.js"],(function(s,e){var t,i,r,o,n,c,a,p,l,u,h,d,y,G,f,v,_,k,C,M,P,b,g;return s({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(s){t=s.applyDecoratedDescriptor,i=s.inherits,r=s.classCallCheck,o=s.possibleConstructorReturn,n=s.getPrototypeOf,c=s.initializerDefineProperty,a=s.assertThisInitialized,p=s.createClass},function(s){l=s.cclegacy,u=s._decorator,h=s.Enum,d=s.ColliderComponent,y=s.Component},function(s){G=s.Constants}],execute:function(){l._RF.push({},"144eaaTMWlJIqP8CQAUUGWw","setGroupMask",void 0),b=u.ccclass,g=u.property,h(G.PhysicsGroup),s("setGroupMask",(f=b("setGroupMask"),v=g({type:G.PhysicsGroup}),_=g({type:G.PhysicsGroup}),f((M=t((C=function(s){function e(){var s,t;r(this,e);for(var i=arguments.length,p=new Array(i),l=0;l<i;l++)p[l]=arguments[l];return t=o(this,(s=n(e)).call.apply(s,[this].concat(p))),c(t,"physicsGroup",M,a(t)),c(t,"physicsMask",P,a(t)),t.collider=null,t}return i(e,s),p(e,[{key:"start",value:function(){this.collider=this.node.getComponent(d),this.collider.setGroup(this.physicsGroup),this.collider.setMask(this.physicsMask)}}]),e}(y)).prototype,"physicsGroup",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.PhysicsGroup.JUMP_TRIGGER}}),P=t(C.prototype,"physicsMask",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.PhysicsGroup.ALL}}),k=C))||k)),l._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../data/Constants.js","../editor/init.js","../RoleBase.js","../Enemy.js","../RoleCtrl.js","../JoyCtrl.js","../RoleManager.js","../setGroupMask.js"],(function(n,t){return{setters:[function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/script/data/Constants.js', 'chunks:///data/Constants.js');
  r('project:///assets/script/editor/init.js', 'chunks:///editor/init.js');
  r('project:///assets/script/RoleBase.js', 'chunks:///RoleBase.js');
  r('project:///assets/script/Enemy.js', 'chunks:///Enemy.js');
  r('project:///assets/script/RoleCtrl.js', 'chunks:///RoleCtrl.js');
  r('project:///assets/script/JoyCtrl.js', 'chunks:///JoyCtrl.js');
  r('project:///assets/script/RoleManager.js', 'chunks:///RoleManager.js');
  r('project:///assets/script/setGroupMask.js', 'chunks:///setGroupMask.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});