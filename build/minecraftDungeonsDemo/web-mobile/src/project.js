System.register("chunks:///effect/blockBatching.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,c){var e,n,o,s,i,r,l,u,a,f,p;return t({_dec:void 0,_class:void 0}),{setters:[function(t){e=t.inherits,n=t.createClass,o=t.classCallCheck,s=t.possibleConstructorReturn,i=t.getPrototypeOf},function(t){r=t.cclegacy,l=t._decorator,u=t.Component}],execute:function(){r._RF.push({},"69df8OtislMZJo1SWOAfqx1","blockBatching",void 0),p=l.ccclass,l.property,t("blockBatching",(a=p("blockBatching"),a(f=function(t){function c(){return o(this,c),s(this,i(c).apply(this,arguments))}return e(c,t),n(c,[{key:"start",value:function(){}}]),c}(u))||f)),r._RF.pop()}}}));

System.register("chunks:///effect/particleRemove.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,i,c,o,n,a,l,s,p,u,v,d,f,m,y,_,h,C,R;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inherits,c=e.classCallCheck,o=e.possibleConstructorReturn,n=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,s=e.createClass},function(e){p=e.cclegacy,u=e._decorator,v=e.ParticleSystemComponent,d=e.Component}],execute:function(){p._RF.push({},"c248dqm1ipPdLwKIx4cPLm2","particleRemove",void 0),C=u.ccclass,R=u.property,e("particleRemove",(f=C("particleRemove"),m=R({type:v}),f((h=r((_=function(e){function t(){var e,r;c(this,t);for(var i=arguments.length,s=new Array(i),p=0;p<i;p++)s[p]=arguments[p];return r=o(this,(e=n(t)).call.apply(e,[this].concat(s))),a(r,"particleCom",h,l(r)),r._isStart=!1,r}return i(t,e),s(t,[{key:"start",value:function(){}},{key:"update",value:function(e){}}]),t}(d)).prototype,"particleCom",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=_))||y)),p._RF.pop()}}}));

System.register("chunks:///game/BlockColor.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(o,t){var e,c,r,s,l,n,i,u,a,p,f;return o({_dec:void 0,_class:void 0}),{setters:[function(o){e=o.inherits,c=o.createClass,r=o.classCallCheck,s=o.possibleConstructorReturn,l=o.getPrototypeOf},function(o){n=o.cclegacy,i=o._decorator,u=o.Component}],execute:function(){n._RF.push({},"8fc20pZ9x5NU7rzW68h6KZi","BlockColor",void 0),f=i.ccclass,i.property,o("BlockColor",(a=f("BlockColor"),a(p=function(o){function t(){return r(this,t),s(this,l(t).apply(this,arguments))}return e(t,o),c(t,[{key:"start",value:function(){console.log(this.node)}}]),t}(u))||p)),n._RF.pop()}}}));

System.register("chunks:///game/data/Constants.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(c,s){var t,o,n,e,a,i,r,E,u;return c({_dec:void 0,_class:void 0,_class2:void 0,_temp:void 0,PhysicsGroup:void 0}),{setters:[function(c){t=c.classCallCheck},function(c){o=c.cclegacy,n=c._decorator}],execute:function(){o._RF.push({},"389f09sgeRIg5LLw/Ltaqmh","Constants",void 0),E=n.ccclass,n.property,cc.macro.ENABLE_WEBGL_ANTIALIAS=!0,cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),function(c){c[c.NONE=0]="NONE",c[c.ROLE=1]="ROLE",c[c.CUBE=2]="CUBE",c[c.HALFCUBE=4]="HALFCUBE",c[c.ENEMY=8]="ENEMY"}(u||(u={})),c("Constants",(e=E("Constants"),e((r=i=function c(){t(this,c)},i.PhysicsGroup=u,a=r))||a)),o._RF.pop()}}}));

System.register("chunks:///game/IsometricCamera.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,s,c,o,a,n,i,u,l,p,m;return e({_dec:void 0,_class:void 0}),{setters:[function(e){r=e.inherits,s=e.createClass,c=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf},function(e){n=e.cclegacy,i=e._decorator,u=e.Component}],execute:function(){n._RF.push({},"5fa1fxgUxRJBpA9gUPNqg4X","IsometricCamera",void 0),m=i.ccclass,i.property,e("IsometricCamera",(l=m("IsometricCamera"),l(p=function(e){function t(){return c(this,t),o(this,a(t).apply(this,arguments))}return r(t,e),s(t,[{key:"start",value:function(){}}]),t}(u))||p)),n._RF.pop()}}}));

System.register("chunks:///game/setGroupMask.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./data/Constants.js"],(function(t,e){var s,o,n,r,c,l,i,a,u,p,h,d,C,f;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){s=t.inherits,o=t.classCallCheck,n=t.possibleConstructorReturn,r=t.getPrototypeOf,c=t.createClass},function(t){l=t.cclegacy,i=t._decorator,a=t.Enum,u=t.ColliderComponent,p=t.Component},function(t){h=t.Constants}],execute:function(){l._RF.push({},"03826UhlJ5DUqe2CHtk02Hc","setGroupMask",void 0),f=i.ccclass,i.property,a(h.PhysicsGroup),t("setGroupMask",(d=f("setGroupMask"),d(C=function(t){function e(){var t,s;o(this,e);for(var c=arguments.length,l=new Array(c),i=0;i<c;i++)l[i]=arguments[i];return(s=n(this,(t=r(e)).call.apply(t,[this].concat(l)))).collider=null,s}return s(e,t),c(e,[{key:"start",value:function(){this.collider=this.node.getComponent(u),this.collider.setGroup(this.node.layer)}}]),e}(p))||C)),l._RF.pop()}}}));

System.register("chunks:///game/Player.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./data/Constants.js"],(function(t,e){var i,s,o,n,a,h,r,c,l,u,y,d,m,p,_,g,f,v,C,E,T,k,S,L,A,M,B,D,w,b,P,R,H,K,U,O,z,W,V,x,I,Y;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0,ANIMSTATE:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,s=t.inherits,o=t.classCallCheck,n=t.possibleConstructorReturn,a=t.getPrototypeOf,h=t.initializerDefineProperty,r=t.assertThisInitialized,c=t.createClass},function(t){l=t.cclegacy,u=t.geometry,y=t._decorator,d=t.Vec3,m=t.Vec2,p=t.CameraComponent,_=t.Node,g=t.PhysicsSystem,f=t.AnimationComponent,v=t.ColliderComponent,C=t.RigidBodyComponent,E=t.systemEvent,T=t.SystemEventType,k=t.macro,S=t.ModelComponent,L=t.Component},function(t){A=t.Constants}],execute:function(){l._RF.push({},"d072dvH949Iy7Bf5fBG3biX","Player",void 0),U=u.ray,O=A.PhysicsGroup,z=y.ccclass,W=y.property,V=new d,x=new m(1,0),new d(0,0,10),I=new d(10,10,10),function(t){t.IDLE="Char-Bones|idle",t.WALK="Char-Bones|walk",t.ROLL="Char-Bones|roll",t.WAVE="Char-Bones|wave"}(Y||(Y={})),t("Player",(M=z("Player"),B=W({type:p}),D=W({type:_}),w=W({type:_}),M((R=i((P=function(t){function e(){var t,i;o(this,e);for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return i=n(this,(t=a(e)).call.apply(t,[this].concat(c))),h(i,"cameraCom",R,r(i)),h(i,"hoverEffct",H,r(i)),h(i,"attackEffct",K,r(i)),i.animComp=null,i.rigidBody=null,i.collider=null,i.trigger=null,i.physicsSystem=g.instance,i._animState=Y.IDLE,i._destination=new d(0,0,0),i._moveSpeed=5,i._moveTime=null,i._moveDelta=new m(0,0),i._attackTarget=null,i._isTouch=!1,i._lastTouch=null,i._isTriggerHalf=!1,i._rollTime=0,i._isShift=!1,i._lastMouse=null,i._hoverEnemyMat=null,i}return s(e,t),c(e,[{key:"start",value:function(){this.animComp=this.node.getComponent(f),this.collider=this.node.getComponent(v),this.trigger=this.node.getChildByName("trigger").getComponent(v),this.rigidBody=this.node.getComponent(C),this.animComp.getState(Y.WALK).speed=2,this.animComp.getState(Y.ROLL).speed=2,this.animComp.getState(Y.WAVE).repeatCount=1,this.animComp.on("finished",this.onAnimFinish,this),E.on(T.TOUCH_START,this.onTouchStart,this),E.on(T.TOUCH_MOVE,this.onTouchMove,this),E.on(T.TOUCH_END,this.onTouchEnd,this),E.on(T.MOUSE_MOVE,this.onMouseMove,this),this.trigger.setMask(O.CUBE+O.HALFCUBE),this.trigger.on("onTriggerEnter",this.onTrigger,this),this.collider.setGroup(this.node.layer),console.log(this.node),E.on(T.KEY_UP,this.onKeyUp,this),E.on(T.KEY_DOWN,this.onKeyDown,this)}},{key:"onCollision",value:function(t){}},{key:"onTrigger",value:function(t){t.otherCollider.getGroup()==O.HALFCUBE&&(this._isTriggerHalf=!0)}},{key:"onKeyUp",value:function(t){switch(t.keyCode){case k.KEY.space:break;case k.KEY.shift:this._isShift=!1}}},{key:"onKeyDown",value:function(t){switch(t.keyCode){case k.KEY.space:this.changeState(Y.ROLL);break;case k.KEY.shift:this._isShift=!0}}},{key:"onMouseMove",value:function(t){this._lastMouse=t}},{key:"onHover",value:function(){var t=this._lastMouse,e=new U;if(this.cameraCom.screenPointToRay(t.getLocationX(),t.getLocationY(),e),this._hoverEnemyMat&&(this._hoverEnemyMat.passes[0].setUniform(this._hoverEnemyMat.passes[0].getHandle("depthBias"),0),this._hoverEnemyMat=null),this.physicsSystem.raycastClosest(e,O.ENEMY)){var i=this.physicsSystem.raycastClosestResult.collider.node.getChildByPath("zombie/RootNode/Mob_Zombie").getComponent(S).material,s=i.passes[0];s.setUniform(s.getHandle("depthBias"),3),this._hoverEnemyMat=i,this.hoverEffct.active=!1}else if(this.physicsSystem.raycastClosest(e,O.CUBE+O.HALFCUBE)){var o=this.physicsSystem.raycastClosestResult.collider.node.parent.position;V.set(o.x,o.y,o.z),this.hoverEffct.setPosition(V),this.hoverEffct.active=!0}}},{key:"onTouch",value:function(){if(!(this._rollTime>0)){this._isShift&&this.changeState(Y.WAVE);var t=this._lastTouch,e=new U;if(this.cameraCom.screenPointToRay(t.getLocationX(),t.getLocationY(),e),this.physicsSystem.raycastClosest(e,O.ENEMY)){if(this._attackTarget===this.physicsSystem.raycastClosestResult.collider.node)return;this._attackTarget=this.physicsSystem.raycastClosestResult.collider.node;this._attackTarget.position;this.attackEffct.setParent(this._attackTarget),this.attackEffct.active=!1,this.attackEffct.active=!0,this.hoverEffct.active=!1}else if(this._attackTarget=null,this.physicsSystem.raycastClosest(e,O.CUBE+O.HALFCUBE)){var i=this.physicsSystem.raycastClosestResult.collider.node.parent.position;if(i.equals(this._destination))return;this._destination.set(i),this.onDestinationChange()}}}},{key:"onTouchStart",value:function(t){this._isTouch=!0,this._lastTouch=t,this.onTouch()}},{key:"onTouchMove",value:function(t){this._isTouch&&(this._lastTouch=t)}},{key:"onTouchEnd",value:function(t){this._isTouch=!1}},{key:"onDestinationChange",value:function(){this._attackTarget||(this.hoverEffct.active=!0,V.set(this._destination.x,this._destination.y,this._destination.z),this.hoverEffct.setPosition(V)),this._moveDelta.set(this._destination.x-this.node.position.x,this._destination.z-this.node.position.z),this._moveTime=this._moveDelta.length()/this._moveSpeed,this.trunEulerAnglesByDelta(),this.changeState(Y.WALK,Y.IDLE,this._attackTarget?"":Y.WAVE)}},{key:"checkAttack",value:function(){var t=this._attackTarget.position,e=new m(0,0);e.set(t.x-this.node.position.x,t.z-this.node.position.z),e.length()<1.5?(this.changeState(Y.WAVE),this.trunEulerAnglesByDelta(e)):(this._destination.set(t),this.onDestinationChange())}},{key:"changeState",value:function(t){if(this._animState!==t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];if(!(i.length>0&&i.indexOf(this._animState)<0))switch(this.animComp.play(t),this._animState=t,t){case Y.WALK:break;case Y.ROLL:this._rollTime=.5;break;case Y.WAVE:}}}},{key:"onAnimFinish",value:function(){switch(this._animState){case Y.WALK:case Y.ROLL:break;case Y.WAVE:V.set(-.5,0,0),this._attackTarget.translate(V)}this.changeState(Y.IDLE)}},{key:"trunEulerAnglesByDelta",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._moveDelta,e=t.angle(x),i=180*e/Math.PI,s=this.node.eulerAngles;V.set(s.x,90-(Math.sign(t.y)||1)*i,s.z),this.node.eulerAngles=V}},{key:"move",value:function(t,e){this._isTriggerHalf&&(V.set(0,.6,0),this.node.translate(V),this._isTriggerHalf=!1),V.set(0,0,e*t),this.node.translate(V)}},{key:"update",value:function(t){this._animState==Y.WALK&&(this._moveTime>0?(this._moveTime-=t,this.move(t,this._moveSpeed)):(this.node.setPosition(V.set(Math.round(10*this.node.position.x)/10,this.node.position.y,Math.round(10*this.node.position.z)/10)),this.rigidBody.setLinearVelocity(V.set(0,0,0)),this.changeState(Y.IDLE))),this._animState==Y.ROLL&&(this._rollTime>0?(this._rollTime-=t,this.move(t,10)):this.changeState(Y.IDLE)),this._attackTarget&&this.checkAttack(),d.add(V,this.node.position,I),V.y=(V.y-this.cameraCom.node.position.y)*t+this.cameraCom.node.position.y,V.y=Math.max(V.y,5),this.cameraCom.node.setPosition(V),this._isTouch&&this.onTouch(),this.node.position.y<-20&&this.node.setPosition(V.set(0,1,0)),this._lastMouse&&this.onHover()}}]),e}(L)).prototype,"cameraCom",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(P.prototype,"hoverEffct",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(P.prototype,"attackEffct",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=P))||b)),l._RF.pop()}}}));

System.register("chunks:///game/Enemy.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,o,r,n,a,c,s,l,u,p,d,y,m,f,v,h,_,C,b,g,k,w,N,E;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inherits,r=e.classCallCheck,n=e.possibleConstructorReturn,a=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,p=e._decorator,d=e.Vec3,y=e.CameraComponent,m=e.Node,f=e.Component}],execute:function(){u._RF.push({},"7d365PHiktEfLxpAkt8wlBV","Enemy",void 0),w=p.ccclass,N=p.property,new d(0,0,0),E=new d,e("Enemy",(v=w("Enemy"),h=N({type:y}),_=N({type:m}),v((g=i((b=function(e){function t(){var e,i;r(this,t);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return i=n(this,(e=a(t)).call.apply(e,[this].concat(l))),c(i,"cameraCom",g,s(i)),c(i,"uiNode",k,s(i)),i}return o(t,e),l(t,[{key:"start",value:function(){}},{key:"update",value:function(e){E.set(this.node.position),E.y+=2.5,this.cameraCom.convertToUINode(E,this.uiNode.parent,E),this.uiNode.setPosition(E)}}]),t}(f)).prototype,"cameraCom",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(b.prototype,"uiNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=b))||C)),u._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../effect/blockBatching.js","../effect/particleRemove.js","../game/BlockColor.js","../game/data/Constants.js","../game/IsometricCamera.js","../game/setGroupMask.js","../game/Player.js","../game/Enemy.js"],(function(e,t){return{setters:[function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){},function(e){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/script/effect/blockBatching.js', 'chunks:///effect/blockBatching.js');
  r('project:///assets/script/effect/particleRemove.js', 'chunks:///effect/particleRemove.js');
  r('project:///assets/script/game/BlockColor.js', 'chunks:///game/BlockColor.js');
  r('project:///assets/script/game/data/Constants.js', 'chunks:///game/data/Constants.js');
  r('project:///assets/script/game/IsometricCamera.js', 'chunks:///game/IsometricCamera.js');
  r('project:///assets/script/game/setGroupMask.js', 'chunks:///game/setGroupMask.js');
  r('project:///assets/script/game/Player.js', 'chunks:///game/Player.js');
  r('project:///assets/script/game/Enemy.js', 'chunks:///game/Enemy.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});